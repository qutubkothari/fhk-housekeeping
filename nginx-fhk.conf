server {
    listen 80 default_server;
    listen [::]:80 default_server;
    server_name _;

    # Root directory for portal
    root /var/www/fhk/portal;
    index index.html;

    # Portal (Login Page) - Root
    location / {
        try_files $uri $uri/ /index.html;
    }

    # Admin Web
    location /admin {
        alias /var/www/fhk/admin;
        index index.html;
        try_files $uri $uri/ /admin/index.html;
    }

    # Admin Assets
    location /admin/assets/ {
        alias /var/www/fhk/admin/assets/;
    }

    # Staff PWA
    location /staff {
        alias /var/www/fhk/staff;
        index index.html;
        try_files $uri $uri/ /staff/index.html;
    }

    # Staff Assets
    location /staff/assets/ {
        alias /var/www/fhk/staff/assets/;
    }

    # CORS headers
    add_header 'Access-Control-Allow-Origin' '*' always;
    add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS' always;
    add_header 'Access-Control-Allow-Headers' 'Origin, Content-Type, Accept' always;

    # Gzip
    gzip on;
    gzip_vary on;
    gzip_min_length 1024;
    gzip_types text/plain text/css text/xml text/javascript application/javascript application/xml+rss application/json;
}
